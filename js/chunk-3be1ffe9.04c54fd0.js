(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-3be1ffe9","chunk-a309478e"],{"01c8":function(t,e,a){"use strict";a("868e")},"08b7":function(t,e,a){},"1b2d":function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"message-room"},[a("section",{staticClass:"room-header"},[t._t("default")],2),a("section",{staticClass:"message-container"},[a("div",{staticClass:"mt-auto"},t._l(t.proccessedMessage,(function(e){return a("div",{key:e.id,staticClass:"message-block",class:{"server-message":0===e.type,"self-message":1===e.type}},[0===e.type?a("div",{staticClass:"message"},[t._v(" "+t._s(t.serverMessage(e))+" ")]):1===e.type?a("div",{staticClass:"self"},[a("div",{staticClass:"message"},[t._v(" "+t._s(e.message)+" ")]),a("div",{staticClass:"time"},[t._v(" "+t._s(t._f("timeFormat")(e.createdAt))+" ")])]):2===e.type?a("div",{staticClass:"user"},[a("div",{staticClass:"message-area"},[a("UserThumbnail",{staticClass:"avatar",attrs:{"initial-user":e.userData}}),a("div",{staticClass:"message"},[t._v(" "+t._s(e.message)+" ")])],1),a("div",{staticClass:"time"},[t._v(" "+t._s(t._f("timeFormat")(e.createdAt))+" ")])]):a("div",{staticClass:"d-none"})])})),0)]),a("section",{staticClass:"control-group"},[a("input",{attrs:{type:"text",name:"message",placeholder:"輸入訊息..."}}),a("icon",{staticClass:"btn-send cursor-pointer",attrs:{"icon-name":"message-send"}})],1)])},n=[],r=a("5530"),i=(a("d81d"),a("b0c0"),a("d092")),c=a("2708"),o=a("2f62"),l={components:{UserThumbnail:i["a"]},mixins:[c["e"],c["b"]],data:function(){return{messages:[]}},computed:Object(r["a"])(Object(r["a"])({},Object(o["b"])(["currentUser"])),{},{proccessedMessage:function(){var t=this;return this.messages.map((function(e){return"server"===e.source?Object(r["a"])(Object(r["a"])({},e),{},{type:0}):e.userData.id===t.currentUser.id?Object(r["a"])(Object(r["a"])({},e),{},{type:1}):Object(r["a"])(Object(r["a"])({},e),{},{type:2})}))}}),methods:{serverMessage:function(t){var e=this.emptyName(t.userData.name,t.userData.account);return"join"===t.action?"".concat(e," 上線"):"leave"===t.action?"".concat(e," 離線"):""}}},u=l,m=(a("3772"),a("2877")),d=Object(m["a"])(u,s,n,!1,null,"07ab1e26",null);e["default"]=d.exports},2441:function(t,e,a){"use strict";var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("section",{staticClass:"site-nav"},[a("div",{staticClass:"main-part"},[a("router-link",{staticClass:"logo",attrs:{to:{name:"homepage"}}},[a("icon",{attrs:{"icon-name":"logo"}})],1),a("section",{staticClass:"nav-container"},[a("router-link",{staticClass:"nav-link link-group",class:{active:["homepage","tweet"].includes(t.$route.name)},attrs:{to:{name:"homepage"}}},[a("icon",{attrs:{"icon-name":"home","icon-class":"mr-20"}}),a("div",{staticClass:"link-text"},[t._v(" 首頁 ")])],1),a("router-link",{staticClass:"nav-link link-group",class:{active:["user-tweets","user-replies","user-likes"].includes(t.$route.name)}&&t.$route.params.id===t.currentUser.id,attrs:{to:{name:"user-main",params:{id:t.currentUser.id}}}},[a("icon",{attrs:{"icon-name":"user","icon-class":"mr-20"}}),a("div",{staticClass:"link-text"},[t._v(" 個人資料 ")])],1),a("router-link",{staticClass:"nav-link link-group",attrs:{to:{name:"notification"}}},["notification"===t.$route.name?a("icon",{attrs:{"icon-name":"notification-bell-fill","icon-class":"mr-20"}}):a("icon",{attrs:{"icon-name":"notification-bell","icon-class":"mr-20"}}),a("div",{staticClass:"link-text"},[t._v(" 通知 ")])],1),a("router-link",{staticClass:"nav-link link-group",attrs:{to:{name:"chatroom"}}},["chatroom"===t.$route.name?a("icon",{attrs:{"icon-name":"email-2-fill","icon-class":"mr-20"}}):a("icon",{attrs:{"icon-name":"email-2","icon-class":"mr-20 icon-fix"}}),a("div",{staticClass:"link-text"},[t._v(" 公開聊天室 ")])],1),a("router-link",{staticClass:"nav-link link-group",attrs:{to:{name:"direct-message"}}},["direct-message"===t.$route.name?a("icon",{attrs:{"icon-name":"email-2-fill","icon-class":"mr-20"}}):a("icon",{attrs:{"icon-name":"email-2","icon-class":"mr-20 icon-fix"}}),a("div",{staticClass:"link-text"},[t._v(" 私人訊息 ")])],1),a("router-link",{staticClass:"nav-link link-group",attrs:{to:{name:"user-setting"}}},[a("icon",{attrs:{"icon-name":"setting","icon-class":"mr-20"}}),a("div",{staticClass:"link-text"},[t._v(" 設定 ")])],1)],1),a("button",{staticClass:"btn-control btn-tweet",on:{click:function(e){return e.stopPropagation(),e.preventDefault(),t.openModal.apply(null,arguments)}}},[t._v(" 推文 ")])],1),a("div",{staticClass:"link-group logout-part"},[a("icon",{attrs:{"icon-name":"logout","icon-class":"mr-20"}}),a("div",{staticClass:"link-text",on:{click:function(e){return e.stopPropagation(),e.preventDefault(),t.logout.apply(null,arguments)}}},[t._v(" 登出 ")])],1),a("portal",{attrs:{to:"modals"}},[a("TweetModal",{attrs:{order:1,show:t.show},on:{close:t.closeModal}})],1)],1)},n=[],r=a("5530"),i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("transition",{attrs:{name:"fade"}},[a("div",{directives:[{name:"show",rawName:"v-show",value:t.show,expression:"show"}]},[a("div",{staticClass:"modal show tweet-modal",attrs:{tabindex:"-1",role:"dialog"},on:{click:function(e){return e.target!==e.currentTarget?null:t.close.apply(null,arguments)}}},[a("div",{staticClass:"modal-dialog",attrs:{role:"document"}},[a("div",{staticClass:"modal-content"},[a("div",{staticClass:"modal-header"},[a("icon",{staticClass:"icon-close cursor-pointer",attrs:{"icon-name":"cross"},nativeOn:{click:function(e){return e.stopPropagation(),e.preventDefault(),t.close.apply(null,arguments)}}})],1),a("div",{staticClass:"modal-body"},[a("TweetBox",{attrs:{"error-message":t.errorMessage},on:{"after-tweet":function(e){return t.handleNewTweet(e)},"update-error":function(e){t.errorMessage=e}}})],1)])])]),a("div",{staticClass:"modal-backdrop show"})])])},c=[],o=(a("b0c0"),a("a9e3"),a("769e")),l={components:{TweetBox:o["a"]},props:{show:{type:Boolean,required:!0,default:!1}},data:function(){return{errorMessage:""}},watch:{show:function(t,e){!1===t&&(this.errorMessage="")}},methods:{close:function(){this.$emit("close")},handleNewTweet:function(t){var e=this.$route;"homepage"===e.name||"user-tweets"===e.name&&t.userData.id===Number(e.params.id)?(this.$store.commit("produceTweet",t),this.close()):(this.close(),this.$router.push({name:"homepage"}))}}},u=l,m=(a("59f9"),a("2877")),d=Object(m["a"])(u,i,c,!1,null,"c8c3e3aa",null),b=d.exports,p=a("2f62"),f={components:{TweetModal:b},data:function(){return{show:!1}},computed:Object(r["a"])({},Object(p["b"])(["currentUser"])),methods:{logout:function(){this.$store.commit("revokeAuthentication"),this.$router.push({name:"user-sign-in"})},openModal:function(){this.show=!0},closeModal:function(){this.show=!1}}},v=f,h=(a("e0f2"),Object(m["a"])(v,s,n,!1,null,"30fa0aee",null));e["a"]=h.exports},"2fa2":function(t,e,a){},3519:function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"page-container"},[a("SiteNav"),a("ListNav",{scopedSlots:t._u([{key:"header",fn:function(){return[t._v(" 上線使用者() ")]},proxy:!0},{key:"list",fn:function(){return[a("div",{staticClass:"list-container"},t._l(t.users,(function(e){return a("div",{key:e.id,staticClass:"list-group"},[a("UserThumbnail",{staticClass:"avatar",attrs:{"initial-user":e}}),a("div",{staticClass:"name"},[t._v(" "+t._s(t.emptyName(e.name,e.account))+" ")]),a("div",{staticClass:"account"},[t._v(" "+t._s(t._f("addPrefix")(e.account))+" ")])],1)})),0)]},proxy:!0}])}),a("MessageRoom",[a("span",{staticClass:"room-title"},[t._v("公開聊天室")])])],1)},n=[],r=a("d092"),i=a("2441"),c=a("7fc4"),o=a("1b2d"),l=a("2708"),u=[{id:1,account:"aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa",name:"bbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbb",avatar:"https://loremflickr.com/320/240/woman/?random=25.130310387068057"},{id:2,account:"bbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbb",name:"",avatar:"https://loremflickr.com/320/240/woman/?random=25.130310387068057"},{id:3,account:"cccccccccccccccccccccccccccccccccccccccc",name:"",avatar:"https://loremflickr.com/320/240/woman/?random=25.130310387068057"}],m={components:{SiteNav:i["a"],ListNav:c["a"],MessageRoom:o["default"],UserThumbnail:r["a"]},mixins:[l["a"],l["b"]],data:function(){return{users:u}}},d=m,b=(a("a130"),a("2877")),p=Object(b["a"])(d,s,n,!1,null,"48cfccb1",null);e["default"]=p.exports},3772:function(t,e,a){"use strict";a("60c1")},"59f9":function(t,e,a){"use strict";a("8402")},"5fe5":function(t,e,a){"use strict";a("9980")},"60c1":function(t,e,a){},6783:function(t,e,a){"use strict";a("a4d3"),a("e01a");var s=a("2fa3");e["a"]={get:function(t){var e=t.tweetId;return s["b"].get("/tweets/".concat(e))},getAll:function(){return s["b"].get("/tweets")},getReplies:function(t){var e=t.tweetId;return s["b"].get("/tweets/".concat(e,"/replies"))},post:function(t){var e=t.description;return s["b"].post("/tweets",{description:e})},postReply:function(t){var e=t.tweetId,a=t.comment;return s["b"].post("/tweets/".concat(e,"/replies"),{comment:a})},like:function(t){var e=t.tweetId;return s["b"].post("/tweets/".concat(e,"/like"))},unlike:function(t){var e=t.tweetId;return s["b"].post("/tweets/".concat(e,"/unlike"))}}},"769e":function(t,e,a){"use strict";var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("section",{staticClass:"tweet-input-box"},[a("section",{staticClass:"avatar-part"},[a("UserThumbnail",{attrs:{"initial-user":t.currentUser}})],1),a("section",{staticClass:"input-part"},[a("textarea",{directives:[{name:"model",rawName:"v-model.trim.lazy",value:t.description,expression:"description",modifiers:{trim:!0,lazy:!0}}],attrs:{placeholder:"有什麼新鮮事？",maxlength:"140"},domProps:{value:t.description},on:{change:function(e){t.description=e.target.value.trim()},blur:function(e){return t.$forceUpdate()}}}),t._v(" "),a("div",{staticClass:"control-part"},[a("span",{staticClass:"error-message",attrs:{title:"error"}},[t._v(t._s(t.error))]),a("button",{staticClass:"btn-control btn-tweet",attrs:{disabled:t.isProcessing},on:{click:function(e){return e.stopPropagation(),e.preventDefault(),t.tweet.apply(null,arguments)}}},[t._v(" 推文 ")])])])])},n=[],r=a("1da1"),i=a("5530"),c=(a("96cf"),a("a4d3"),a("e01a"),a("d9e2"),a("d092")),o=a("2708"),l=a("6783"),u=a("2f62"),m=a("2fa3"),d={components:{UserThumbnail:c["a"]},mixins:[o["c"]],props:{errorMessage:{type:String,required:!1,default:""}},data:function(){return{description:"",error:"",isProcessing:!1}},computed:Object(i["a"])({},Object(u["b"])(["currentUser"])),watch:{errorMessage:function(t){console.log(t),this.error=t}},methods:{tweet:function(){var t=this;return Object(r["a"])(regeneratorRuntime.mark((function e(){var a,s,n,r,i,c;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(e.prev=0,a=t.checkTweet(t.description),s=a.status,n=a.message,t.error="",!1!==s){e.next=7;break}return t.error=n,t.$emit("update-error",t.error),e.abrupt("return");case 7:return t.$emit("update-error",t.error),t.isProcessing=!0,e.next=11,l["a"].post({description:t.description});case 11:if(r=e.sent,i=r.data,"success"===i.status){e.next=15;break}throw new Error(i.status);case 15:c=i.tweetData,t.$emit("after-tweet",{id:c.id,userData:t.currentUser,description:t.description,replyAmount:0,likeAmount:0,userLiked:!1,createdAt:new Date}),t.description="",e.next=24;break;case 20:e.prev=20,e.t0=e["catch"](0),console.log(e.t0),m["a"].fire({icon:"error",title:"發推失敗，請稍後再試"});case 24:return e.prev=24,t.isProcessing=!1,e.finish(24);case 27:case"end":return e.stop()}}),e,null,[[0,20,24,27]])})))()}}},b=d,p=(a("a88e"),a("2877")),f=Object(p["a"])(b,s,n,!1,null,"f15bbad6",null);e["a"]=f.exports},"7fc4":function(t,e,a){"use strict";var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("section",{staticClass:"user-list"},[a("div",{staticClass:"list-header"},[t._t("header")],2),a("div",{staticClass:"list-body"},[t._t("list")],2)])},n=[],r=(a("5fe5"),a("2877")),i={},c=Object(r["a"])(i,s,n,!1,null,"4b89ca4c",null);e["a"]=c.exports},8402:function(t,e,a){},"868e":function(t,e,a){},9980:function(t,e,a){},"9f3f":function(t,e,a){},a130:function(t,e,a){"use strict";a("9f3f")},a88e:function(t,e,a){"use strict";a("08b7")},d092:function(t,e,a){"use strict";var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("router-link",{staticClass:"photo-container",attrs:{to:{name:"user-main",params:{id:t.user.id}}}},[a("img",{directives:[{name:"show",rawName:"v-show",value:t.user.avatar,expression:"user.avatar"}],attrs:{src:t.user.avatar},on:{error:function(e){t.user.avatar=""}}})])},n=[],r=a("5530"),i={props:{initialUser:{type:Object,required:!0}},data:function(){return{user:{id:-1,avatar:""}}},watch:{initialUser:function(t){this.user=Object(r["a"])(Object(r["a"])({},this.user),t)}},created:function(){this.user=Object(r["a"])(Object(r["a"])({},this.user),this.initialUser)}},c=i,o=(a("01c8"),a("2877")),l=Object(o["a"])(c,s,n,!1,null,"34e062da",null);e["a"]=l.exports},e0f2:function(t,e,a){"use strict";a("2fa2")}}]);
//# sourceMappingURL=chunk-3be1ffe9.04c54fd0.js.map